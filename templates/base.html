<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Chinese Dictation{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/logo.png') }}">
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='images/logo.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
    <meta name="theme-color" content="#ffffff">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Chinese Dictation">
</head>
<body>

<header class="topbar">
    <nav class="navbar">
        <div class="brand">
            <a href="/">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" style="height: 40px; vertical-align: middle;">
                <span style="margin-left: 0.5em;">Chinese Dictation</span>
            </a>
        </div>
        <div class="user-links">
            {% if session.get("email") %}
                <span class="user-email">👤 {{ session["email"] }}</span>
                <a class="nav-link" href="/logout">🚪 Logout</a>
            {% else %}
                <a class="nav-link" href="/login">🔐 Login</a>
                <a class="nav-link" href="/signup">📝 Sign up</a>
            {% endif %}
        </div>
    </nav>
</header>

<main class="content">
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash-message flash-{{ category }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
    {% block content %}{% endblock %}
</main>

<footer class="footer">
    <p>&copy; 2025 Chinese Dictation. Learn Chinese efficiently.</p>
</footer>

<script>
// Auto-hide flash messages after 5 seconds
document.addEventListener('DOMContentLoaded', function() {
    const flashMessages = document.querySelectorAll('.flash-message');
    flashMessages.forEach(function(message) {
        setTimeout(function() {
            message.style.opacity = '0';
            message.style.transform = 'translateX(100%)';
            setTimeout(function() {
                message.remove();
            }, 300);
        }, 5000);
    });
});
</script>

</body>
</html>
